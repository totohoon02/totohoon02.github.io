# Computer Science

- 특정 코드 혹은 프로그램이 어떻게 동작하며, 왜 특정 성능을 내는지에 대한 `근거`를 제시하고 `설명`하는 능력
- 프로그램의 목적은 `제대로 동작하게 만드는 것`
- 근거를 이해하지 못하고 복붙한 코드는 스파게티가 된다.
- 실행 원리를 이해하고 설명하기 위해서는 `컴퓨터 과학`을 `이해`해야 한다.

# 컴퓨터 구조

## 컴퓨터 구조의 큰 그림

### 컴퓨터가 이해하는 정보

- `데이터`와 `명령어`
- 수행할 `동작`과 `대상`으로 구성
- 코드(프로그래밍 언어)는 내부적으로 데이터와 명령어로 변환되어 실행된다.

```
더하기 A와 B를
출력 'Hello World'
```

- `CPU`가 명령어를 실행

### 컴퓨터의 핵심 부품

- `CPU`
  - 명령어를 읽어 실행
  - `ALU`(계산기) + `CU`(제어신호) + `register`(임시 저장)
- `주기억장치` : `메모리`(RAM), `캐시 메모리`(필요한 데이터를 임시로 저장)
- `보조기억장치` : `SSD`
- `입출력장치` : `키마모프`

> 컴퓨터의 핵심 부품들은 모두 `메인 보드`에 연결되어 있고 `버스`를 통해 통신

## 컴퓨터가 이해하는 정보

### 데이터 표현

- CPU는 `0`과 `1`만을 이해한다.
- 1byte는 2^8(256)개의 정보를 표현
- 64비트에서 부호(1), 가수(11), 소수(52)
- 문자 표현: 유니코드
  - 유니코드에 부여된 값을 인코딩해 표현
  - utf-8
- 파일 표현: base64

### 명령어

- 동작(연산 코드)과 대상(오퍼랜드 / 주소)
- 프로그래밍 언어 > 어셈블리어 > 기계어
- 명령어 사이클
  - 명령어의 실행은 인출 사이클과 실행 사이클의 반복

## CPU

### 레지스터

- 데이터와 명령어를 임시 저장
- 프로그램 카운터
  - 다음 읽어들일 명령어의 주소
- 명령어 레지스터
- 범용 레지스터
  - 데이터, 명령어 둘 다 저장
- 플래그 레지스터
  - 실행 결과에 대한 정보를 저장
- 스택 포인터
  - 메모리 스택의 탑을 가리키는 레지스터
  - 스택이 채워진 정도

### 인터럽트

#### 비동기 인터럽트

- CPU의 작업을 방해하는 신호
- 동기 인터럽트(`Exception`)
  - CPU에 의해서 발생
  - 예외적인 상황 처리
- 비동기 인터럽트
  - 입출력장치에 의해서 발생
  - 알림과 같은 역할
  - I/O작업은 CPU에 비해 현저히 느림
  - CPU가 I/O작업을 대기하지 않고 작업이 끝났을 때 신호를 보낸다
  - 그동안 CPU는 다른 작업 처리

#### 예외

- CPU는 예외가 발생하면 하던 일을 중단하고 예외를 처리
- 폴트
  - 예외 처리 직후 예외가 발생한 명령어부터 실행
- 트랩
  - 예외 처리 직후 예외가 발생한 다음 명령어부터 실행
- 중단
  - 프로그램을 강제 중단

### CPU 성능 향상을 위한 설계

#### 클럭 속도

- 명령어 처리 속도
- CPU의 속도

### 멀티코어와 멀티스레드

- 멀티 코어: 명령어 처리 부품이 여러 개
- 스레드
  - 하드웨어 스레드
    - 하나의 코어가 동시에 처리하는 명령어 단위
  - 소프트웨어 스레드
  - 하나의 프로그램에서 독립적으로 실행되는 단위
- 병렬성: 물리적으로 여러 작업을 동시에 실행
- 동시성: 여러 작업이 동시에 실행되는 것 처럼 보이게 함

## 메모리

### RAM

- 실행 중인 프로그램이 저장
- 휘발성
- Random Access: 특정 주소에 바로 접근 가능
- DRAM
  - 시간이 지나면 데이터가 점차 사라지는 RAM
  - 일반적인 RAM
- SRAM
  - 시간이 지나도 데이터가 사라지지 않는 RAM
  - 캐시 메모리
- SDRAM
  - 클럭 신호와 동기화된 DRAM
  - 더 빠름
- DDR SDRAM
  - 대역폭이 넓은 SDRAM
  - DDR4 할때 그거임

### 빅 엔디안 vs 리틀 엔디안

- 메모리에 바이트를 밀어넣는 순서
- 1q2w3e4r(메모리 주소 증가)
  - 빅 엔디안 1q2w3e4r / 낮은 주소번지부터
    - 가독성
  - 리틀 엔디안 4r3e2w1q / 높은 주소번지부터
    - 수치 계산 편리

### 캐시 메모리

- CPU에서 매 번 RAM에 접근하기헤는 너무 느리다
- CPU와 RAM 사이의 임시 저장소
- 히트 & 미스
  - 캐시 메모리는 CPU가 사용할 법한 것을 가져와 저장
  - 예측이 맞은 빈도와 틀린 빈도

### 참조 지역성

- 캐싱할 데이터를 예측하는 방법
- 시간 지역성
  - 최근 접근했던 메모리에 다시 접근하려는 경향
  - 변수
- 공간 지역성
  - 최근 접근한 메모리 근처 메모리에 접근하려는 경향
  - 배열

> 캐싱은 데이터 접근에 빠른 성능을 보장, 데이터 일관성을 유지하기 위한 책임이 필요하다

## 보조기억장치와 입출력 장치

### RAID

- 기억장치: 플래시 메모리 기반 저장장치
- RAID: 여러 개의 보조기억장치를 한 개의 장치처럼 사용

### 입출력 기법

- CPU - 장치 컨트롤러 - 장치 드라이버
- CPU에서 드라이버 프로그램을 실행한다.

# 운영체제

## 운영체제의 큰 그림

운영체제도 프로그램이다.

### 운영체제의 역할

컴퓨터 부품에 자원을 할당하고 효율적으로 사용되도록 관리

- CPU 스케줄링
- 메모리 관리
- 파일 관리
- 프로세스 및 스레드 관리

### 시스템 콜과 이중 모드

- 운영체제도 일종의 프로그램이다. 메모리에 적재되어야 한다.
- 운영체제는 커널 영역이라는 공간에 따로 적재된다.
- 운영체제의 기능을 사용하기 위해서는 커널 영역에 적재된 코드를 실행해야 한다.
- 시스템콜
  - 응용 프로그램이 운영체제의 코드를 호출하는 방법
  - 시스템 콜을 이용해 하드웨어 자원을 사용한다.
  - 시스템 콜을 호출하면 소프트웨어 인터럽트 발생, 커널모드로 전환되어 코드 실행, 실행이 끝나면 사용자 모드로 다시 전환된다.

## 프로세스와 스레드

### 프로세스

- 포어그라운드 프로세스
- 백 프로세스
  - 데몬(서비스)
- 코드
- 데이터
  - 정적 변수, 전역 변수
- 힙
  - 프로그램 실행 도중 할당되는 메모리
  - 메모리 누수, GC
- 스택
  - 일시적으로 사용할 변수
  - 매개 변수, 지역 변수, 함수의 호출 정보
- PCB
  - 프로세스 관리를 위한 정보 저장
  - 프로세스 ID
  - 레지스터
  - 프로세스 상태
  - CPU 스케줄링 정보
  - 메모리 관련 정보
  - 파일 및 입출력 정보

프로세스의 CPU 사용은 시간에 따라 제한. PCB의 프로세스 실행 정보를 백업(Context)

- 프로세스는 생성 이후 준비 -> 실행 반복
- I/O 같은게 들어오면 대기
- 끝나면 종료 상태

### 멀티프로세스와 멀티스레드

- 멀티프로세스
  - 동시에 여러 프로세스가 실행
  - 자원을 독립적으로 사용
- 멀티스레드
  - 한 프로세스 내에 여러 스레드가 실행
  - 자원을 공유

## 동기화와 교착 상태

- 다수의 프로세스/스레드가 공유자원에 동시에 접근한 경우
- 공유 자원에 접근하는 코드 중 동시에 실행했을 때 문제가 발생할 수 있는 코드를 `임계 구역`이라고 함
- 임계 구역에서 코드 실행으로 인해 발생하는 문제 `레이스 컨디션`

### 동기화

- 실행 순서 제어
- 상호 배제
  - 동시에 접근해서는 안되는 자원 설정

> 두 가지 조건을 준수하며 실행

### 뮤텍스 락

- 동시 접근이 불가능하도록 상호 배제를 보장
- lock을 획득/해제
- lock을 획득하지 못하면 대기

### 세마포

- 공유 자원이 여러 개인 경우
- `wait` 호출 시 공유 가능한 자원의 갯수(`S`)를 확인
- `S`가 0 미만일 경우 이후 스레드는 대기

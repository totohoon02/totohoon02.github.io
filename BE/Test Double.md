# 🧪 테스트 더블 (Test Double)

**테스트 더블(Test Double)** 은 테스트 코드에서 **실제 의존성을 대체하기
위한 가짜 객체**입니다.

외부 시스템(DB, API, 네트워크 등)에 의존하지 않고 테스트를 **독립적이고
안정적으로 실행**할 수 있게 해줍니다.

## 🎯 테스트 더블의 필요성

> 문제 상황 테스트 더블로 해결되는 이유

- 외부 DB, API에 외부 세계와의 상호작용을 시뮬레이션 의존해 테스트가 느리거나 불안정
- 복잡한 초기 설정, 간단한 가짜 구현으로 테스트 단순화 환경 의존성
- 예측 불가능한 외부 제어 가능한 가짜 의존성으로 대체 동작 (랜덤, 시간, 네트워크)
- 테스트 중 외부 안전하게 격리된 테스트 환경 제공, 시스템에 부수 효과 발생

**외부 의존성으로 문제가 발생할 수 있는 경우**

## 🔸 테스트 더블의 5가지 종류

- **Dummy**
  - 아무런 동작도 하지 않으며, 인스턴스화된 객체만 필요한 경우
- **Stub**
  - 구현을 단순한 것으로 대체합니다. 테스트에 맞게 단순히 원하는 동작을 수행합니다.
- **Fake**
  - 제품에는 적합하지 않지만, 실제 동작하는 구현을 제공합니다.
- **Spy**
  - 호출된 내역을 기록합니다. 기록한 내용은 테스트 결과를 검증할 때 주로 사용되며, 스텁의 일종이기도 합니다.
- **Mock**
  - 기대한 대로 상호작용하는지 행위를 검증합니다. 기대한 것처럼 동작하지 않는다면, 예외를 발생할 수 있습니다. 목 객체는 스텁이자 스파이기도 합니다.

## 💡 **정리:**

- **Dummy** → 단순한 자리 채움
- **Stub** → 고정된 응답
- **Fake** → 간단한 실제 구현
- **Spy** → 호출 기록 검증
- **Mock** → 기대 행위 검증

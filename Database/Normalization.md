# 데이터베이스 정규화 (Normalization)

데이터베이스 정규화는 데이터를 **중복 없이 깔끔하게 정리**해서 **일관성과 무결성**을 보장하는 과정입니다.

---

## 1정규형 (1NF)

👉 **한 칸에는 한 개 값만**

### 정규화 전

| 학번 | 이름   | 전화번호                     |
| ---- | ------ | ---------------------------- |
| 1001 | 김철수 | 010-1234-5678, 010-9876-5432 |
| 1002 | 이영희 | 010-2222-3333                |

- 전화번호에 여러 값이 들어가 있어서 1정규형 위반

### 정규화 후

| 학번 | 이름   | 전화번호      |
| ---- | ------ | ------------- |
| 1001 | 김철수 | 010-1234-5678 |
| 1001 | 김철수 | 010-9876-5432 |
| 1002 | 이영희 | 010-2222-3333 |

---

## 2정규형 (2NF)

👉 **복합키 일부에만 의존하는 컬럼을 분리**

#### 복합키

- 두개 이상의 컬럼을 합쳐서 PK로 사용
  - 학번 / 과목코드는 중복될 수 있음
  - 학번 + 과목코드는 유일하게 구별

```sql
CREATE TABLE Enrollment (
    학번 INT,
    과목코드 VARCHAR(10),
    성적 CHAR(2),
    PRIMARY KEY (학번, 과목코드) -- 복합키 지정
);
```

### 정규화 전 (1NF까지만 적용)

| 학번 | 과목코드 | 학생이름 | 성적 |
| ---- | -------- | -------- | ---- |
| 1001 | CS101    | 김철수   | A    |
| 1001 | EE202    | 김철수   | B    |
| 1002 | CS101    | 이영희   | A+   |

- 기본키: (학번, 과목코드)
- 학생이름은 **학번에만** 의존 → 중복 발생

### 정규화 후

**수강 테이블**

| 학번 | 과목코드 | 성적 |
|------|----------|------|
| 1001 | CS101 | A |
| 1001 | EE202 | B |
| 1002 | CS101 | A+ |

**학생 테이블**

| 학번 | 학생이름 |
|------|----------|
| 1001 | 김철수 |
| 1002 | 이영희 |

---

## 3정규형 (3NF)

👉 **키가 아닌 컬럼에 의존하는 속성을 분리**

### 정규화 전

| 학번 | 이름   | 학과코드 | 학과명     |
| ---- | ------ | -------- | ---------- |
| 1001 | 김철수 | CS       | 컴퓨터공학 |
| 1002 | 이영희 | EE       | 전기공학   |
| 1003 | 박민수 | CS       | 컴퓨터공학 |

- 학과명은 학번보다 **학과코드에** 의존 → 중복 발생

### 정규화 후

**학생 테이블**

| 학번 | 이름 | 학과코드 |
|------|--------|----------|
| 1001 | 김철수 | CS |
| 1002 | 이영희 | EE |
| 1003 | 박민수 | CS |

**학과 테이블**

| 학과코드 | 학과명 |
|----------|------------|
| CS | 컴퓨터공학 |
| EE | 전기공학 |

---

## 요약

- **1정규형**: 한 칸에는 한 값만 (원자성)
- **2정규형**: 복합키 일부에만 의존하는 속성 제거
- **3정규형**: 키가 아닌 다른 컬럼에 의존하는 속성 제거

실무에서는 보통 **3정규형까지 적용**하고, 성능을 위해 일부는 반정규화하기도 함.
무결성 vs 성능의 트레이드오프
